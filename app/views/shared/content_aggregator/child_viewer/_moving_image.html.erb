<%
poster_url ||= get_resolved_asset_url(id: child[:id], pid: child[:pid], size: 768, type: 'full', format: 'jpg')
has_captions = child.fetch(:datastreams_ssim, []).include?('captions')
captions_path = bytestream_content_path(catalog_id: child[:id], bytestream_id: 'captions') if has_captions
options = { captions_path:  captions_path }
unless (media_url = wowza_media_token_url(child))
  media_url = bytestream_content_path(catalog_id: child[:pid], bytestream_id: 'access')
  options[:media_type] = 'video/mp4'
end
%>

<div>
  <div>
    <%= render_media_element_streaming_player(media_url, poster_url, **options) %>
    <%= render Dcv::ContentAggregator::ChildViewer::ButtonPanelComponent.new(child: SolrDocument.new(child), child_index: child_index, document: document, local_downloads: local_downloads) %>
  </div>
</div>

