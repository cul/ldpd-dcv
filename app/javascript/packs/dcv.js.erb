import 'video.js/dist/video-js.css';
import clipboardFromElement from "../src/dcv/clipboard";
import ColorBox from "../src/dcv/jquery.colorbox";
import DcvModals from "../src/dcv/dcv.modals";
import { zoomingImageModal, zoomingImageNewWindow } from "../src/dcv/modals/zoomingImage";
import { initTiles } from '../src/dcv/dcv.show.zooming_viewer';
import readyHandlers from '../src/dcv/dcv.general';
window.clipboardFromElement = clipboardFromElement;
window.initTiles = initTiles;
window.zoomingImageModal = zoomingImageModal;
window.zoomingImageNewWindow = zoomingImageNewWindow;

readyHandlers.forEach(handler => $(document).ready(handler));
$(document).ready(function(){
  // make modals draggable
  $("#colorbox").draggable({
    handle: "#cboxWrapper"
  });
  $("#dcvModal").draggable({
    handle: "#dcvModalWrapper"
  });
  $('#dcvModal').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget); // Button that triggered the modal
    var modal = $(this);
    modal.find('.modal-title').html(DcvModals.titleFor(button));
    modal.find('.modal-body').html(DcvModals.bodyFor(button));
    if (DcvModals.needsEmbed(button)) {
      if (DcvModals.needsLarge(button)) {
        modal.find('.modal-dialog').addClass('modal-xl');
      } else {
        modal.find('.modal-dialog').removeClass('modal-xl');
      }
      modal.find('.modal-content').addClass('mh-100');
    } else {
      modal.find('.modal-content').removeClass('mh-100');
    }
    modal.modal('handleUpdate');
  });
});
